!function(a,b){"use strict";function c(a,c,d,e,f){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(g,h,i,j,k){function l(){n&&(n.$destroy(),n=null),o&&(f.leave(o),o=null)}function m(){var i=a.current&&a.current.locals,j=i&&i.$template;if(j){var m=g.$new();k(m,function(k){k.html(j),f.enter(k,null,o||h,function(){!b.isDefined(p)||p&&!g.$eval(p)||c()}),l();var r=d(k.contents()),s=a.current;if(n=s.scope=m,o=k,s.controller){i.$scope=n;var t=e(s.controller,i);s.controllerAs&&(n[s.controllerAs]=t),k.data("$ngControllerController",t),k.children().data("$ngControllerController",t)}r(n),n.$emit("$viewContentLoaded"),n.$eval(q)})}else l()}var n,o,p=i.autoscroll,q=i.onload||"";g.$on("$routeChangeSuccess",m),m()}}}a=b.module("ngRoute",["ng"]).provider("$route",function(){function a(a,c){return b.extend(new(b.extend(function(){},{prototype:a})),c)}function c(a,b){var c=b.caseInsensitiveMatch,d={originalPath:a,regexp:a},e=d.keys=[];return a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?|\*])?/g,function(a,b,c,d){return a="?"===d?d:null,d="*"===d?d:null,e.push({name:c,optional:!!a}),b=b||"",""+(a?"":b)+"(?:"+(a?b:"")+(d&&"(.+?)"||"([^/]+)")+(a||"")+")"+(a||"")}).replace(/([\/$\*])/g,"\\$1"),d.regexp=RegExp("^"+a+"$",c?"i":""),d}var d={};this.when=function(a,e){if(d[a]=b.extend({reloadOnSearch:!0},e,a&&c(a,e)),a){var f="/"==a[a.length-1]?a.substr(0,a.length-1):a+"/";d[f]=b.extend({redirectTo:a},c(f,e))}return this},this.otherwise=function(a){return this.when(null,a),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$http","$templateCache","$sce",function(c,e,f,g,h,i,j,k){function l(){var a=m(),d=p.current;a&&d&&a.$$route===d.$$route&&b.equals(a.pathParams,d.pathParams)&&!a.reloadOnSearch&&!o?(d.params=a.params,b.copy(d.params,f),c.$broadcast("$routeUpdate",d)):(a||d)&&(o=!1,c.$broadcast("$routeChangeStart",a,d),(p.current=a)&&a.redirectTo&&(b.isString(a.redirectTo)?e.path(n(a.redirectTo,a.params)).search(a.params).replace():e.url(a.redirectTo(a.pathParams,e.path(),e.search())).replace()),g.when(a).then(function(){if(a){var c,d,e=b.extend({},a.resolve);return b.forEach(e,function(a,c){e[c]=b.isString(a)?h.get(a):h.invoke(a)}),b.isDefined(c=a.template)?b.isFunction(c)&&(c=c(a.params)):b.isDefined(d=a.templateUrl)&&(b.isFunction(d)&&(d=d(a.params)),d=k.getTrustedResourceUrl(d),b.isDefined(d)&&(a.loadedTemplateUrl=d,c=i.get(d,{cache:j}).then(function(a){return a.data}))),b.isDefined(c)&&(e.$template=c),g.all(e)}}).then(function(e){a==p.current&&(a&&(a.locals=e,b.copy(a.params,f)),c.$broadcast("$routeChangeSuccess",a,d))},function(b){a==p.current&&c.$broadcast("$routeChangeError",a,d,b)}))}function m(){var c,f;return b.forEach(d,function(d){var g;if(g=!f){var h=e.path();g=d.keys;var i={};if(d.regexp)if(h=d.regexp.exec(h)){for(var j=1,k=h.length;k>j;++j){var l=g[j-1],m="string"==typeof h[j]?decodeURIComponent(h[j]):h[j];l&&m&&(i[l.name]=m)}g=i}else g=null;else g=null;g=c=g}g&&(f=a(d,{params:b.extend({},e.search(),c),pathParams:c}),f.$$route=d)}),f||d[null]&&a(d[null],{params:{},pathParams:{}})}function n(a,c){var d=[];return b.forEach((a||"").split(":"),function(a,b){if(0===b)d.push(a);else{var e=a.match(/(\w+)(.*)/),f=e[1];d.push(c[f]),d.push(e[2]||""),delete c[f]}}),d.join("")}var o=!1,p={routes:d,reload:function(){o=!0,c.$evalAsync(l)}};return c.$on("$locationChangeSuccess",l),p}]}),a.provider("$routeParams",function(){this.$get=function(){return{}}}),a.directive("ngView",c),c.$inject=["$route","$anchorScroll","$compile","$controller","$animate"]}(window,window.angular),angular.module("angular-gallery-app",["ngResource","ngRoute","angular-gallery"]).config(["$routeProvider",function(a){a.when("/gallery",{templateUrl:"views/imageGallery.html",controller:"ImageGalleryCtrl",reloadOnSearch:!1,resolve:{images:["DataService",function(a){return a.getImages()}]}}).otherwise({redirectTo:"/gallery",reloadOnSearch:!1})}]);var ImgCtrl=angular.module("angular-gallery-app").controller("ImageGalleryCtrl",["$scope","$location","images",function(a,b,c){a.selectedIndex=void 0,a.images=c;var d=function(){var c=b.search(),d=c?parseInt(c.index):0;e(d)?a.selectedIndex=+b.search().index:b.search({index:0})},e=function(b){return!("undefined"==typeof b||b>a.images.length-1||0>b||isNaN(b))},f=function(a){b.search({index:a})};angular.forEach(["$routeUpdate","$routeChangeSuccess"],function(b){a.$on(b,d)}),a.$watch("selectedIndex",f)}]);angular.module("angular-gallery-app").value("config",{imagesUrl:"data/imageGallery.json"}).factory("DataService",["$http","$q","config",function(a,b,c){return{imagesUrl:c.imagesUrl,getImages:function(){var c=b.defer();return a.get(this.imagesUrl).success(function(a){c.resolve(a)}).error(function(){c.reject("An error occurred while getting images.")}),c.promise}}}]);